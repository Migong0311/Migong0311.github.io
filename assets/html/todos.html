<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Smart Todo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* ì‚¬ìš©ì ì •ì˜ ìŠ¤íƒ€ì¼ */
    body {
      background-color: #f8f9fa;
      /* ë¶€ë“œëŸ¬ìš´ íšŒìƒ‰ ë°°ê²½ */
    }

    .todo-container {
      max-width: 600px;
      margin-top: 50px;
    }

    .completed-text {
      text-decoration: line-through;
      color: #adb5bd;
    }

    .cursor-pointer {
      cursor: pointer;
    }

    /* íŠ¸ëœì§€ì…˜ íš¨ê³¼ */
    .list-enter-active,
    .list-leave-active {
      transition: all 0.5s ease;
    }

    .list-enter-from,
    .list-leave-to {
      opacity: 0;
      transform: translateX(30px);
    }
  </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand font-cinzel" href="../../index.html">My Project</a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle active" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            ìœ í‹¸ë¦¬í‹° & ì˜ˆì œ
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                            <li>
                                <h6 class="dropdown-header">ìœ í‹¸ë¦¬í‹°</h6>
                            </li>
                            <li><a class="dropdown-item active" href="todos.html"><i class="bi bi-check2-square me-2"></i>Todo ë¦¬ìŠ¤íŠ¸</a></li>
                            <li><a class="dropdown-item" href="luckylotto.html"><i class="bi bi-ticket-perforated me-2"></i>ë¡œë˜ ì¶”ì²¨ê¸°</a></li>
                            <li><a class="dropdown-item" href="tushima_travel.html"><i class="bi bi-airplane me-2"></i>ëŒ€ë§ˆë„1ë°•2ì¼</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li>
                                <h6 class="dropdown-header">API ì˜ˆì œ</h6>
                            </li>
                            <li><a class="dropdown-item" href="randomdog.html"><i class="bi bi-hearts me-2"></i>ëœë¤ ê°•ì•„ì§€</a></li>
                            <li><a class="dropdown-item" href="catapi.html"><i class="bi bi-emoji-heart-eyes me-2"></i>ëœë¤ ê³ ì–‘ì´</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="app" class="container todo-container">

        <div class="card shadow-sm border-0">
            <div class="card-header bg-primary text-white p-4">
                <h2 class="fw-bold mb-0">ğŸ“… My Daily Todo</h2>
                <p class="mb-0 mt-2">ì˜¤ëŠ˜ í•  ì¼ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ì„¸ìš”.</p>
            </div>

            <div class="card-body p-4">
                <div class="mb-4">
                    <div class="d-flex justify-content-between mb-1">
                        <span class="fw-bold text-primary">ì§„í–‰ë¥ </span>
                        <span class="text-secondary">{{ completedCount }} / {{ totalCount }} ì™„ë£Œ</span>
                    </div>
                    <div class="progress" style="height: 10px;">
                        <div class="progress-bar bg-success" role="progressbar" :style="{ width: progressPercent + '%' }"
                            aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>

                <form @submit.prevent="addTodo" class="input-group mb-4 shadow-sm">
                    <input type="text" class="form-control form-control-lg" v-model="userInput"
                        placeholder="ìƒˆë¡œìš´ í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”..." autofocus>
                    <button class="btn btn-primary px-4" type="submit">ì¶”ê°€</button>
                </form>

                <ul class="list-group list-group-flush">
                    <li v-if="todos.length === 0" class="list-group-item text-center text-muted py-5">
                        ë“±ë¡ëœ í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤. ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ê³„íší•´ ë³´ì„¸ìš”!
                    </li>

                    <li v-for="todo in todos" :key="todo.id"
                        class="list-group-item d-flex justify-content-between align-items-center py-3">

                        <div class="d-flex align-items-center">
                            <input class="form-check-input me-3" type="checkbox" v-model="todo.isCompleted"
                                style="width: 1.5em; height: 1.5em; cursor: pointer;">

                            <span :class="{ 'completed-text': todo.isCompleted }" class="fs-5">
                                {{ todo.text }}
                            </span>
                        </div>

                        <button @click="deleteTodo(todo.id)" class="btn btn-outline-danger btn-sm rounded-pill px-3">
                            ì‚­ì œ
                        </button>
                    </li>
                </ul>
            </div>

            <div class="card-footer bg-white text-end py-3">
                <button v-if="todos.length > 0" @click="clearAll"
                    class="btn btn-link text-danger text-decoration-none btn-sm">
                    ì „ì²´ ì‚­ì œ
                </button>
            </div>
        </div>
    </div>
    
    
</body>

  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script>
    const { createApp, ref, computed, watch, onMounted } = Vue

        const app = createApp({
            setup() {
                const userInput = ref("")
                const todos = ref([])

                const loadTodos = () => {
                    const savedTodos = localStorage.getItem('my_todos')
                    if (savedTodos) {
                        todos.value = JSON.parse(savedTodos)
                    }
                }

                onMounted(() => {
                    loadTodos()
                })

                watch(todos, (newTodos) => {
                    localStorage.setItem('my_todos', JSON.stringify(newTodos))
                }, { deep: true })


                const totalCount = computed(() => todos.value.length)
                const completedCount = computed(() => todos.value.filter(t => t.isCompleted).length)
                const progressPercent = computed(() => {
                    if (totalCount.value === 0) return 0
                    return Math.round((completedCount.value / totalCount.value) * 100)
                })


                const addTodo = () => {
                    if (userInput.value.trim() === "") {
                        alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                        return
                    }

                    const newTodo = {
                        id: Date.now(),
                        text: userInput.value,
                        isCompleted: false
                    }

                    todos.value.push(newTodo)
                    userInput.value = ""
                }

                const deleteTodo = (id) => {
                    if (!confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return

                    const index = todos.value.findIndex((todo) => todo.id === id)
                    if (index !== -1) {
                        todos.value.splice(index, 1)
                    }
                }

                const clearAll = () => {
                    if (confirm("ëª¨ë“  ê¸°ë¡ì„ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                        todos.value = []
                    }
                }

                return {
                    todos,
                    userInput,
                    addTodo,
                    deleteTodo,
                    clearAll,
                    totalCount,
                    completedCount,
                    progressPercent
                }
            }
        })

        app.mount('#app')
  </script>
</body>

</html>